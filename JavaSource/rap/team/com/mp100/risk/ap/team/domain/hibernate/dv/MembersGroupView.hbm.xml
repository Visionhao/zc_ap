<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping package="com.mp100.risk.ap.team.domain.hibernate.dv">
    <class name="MembersGroupView" table="X_AP_GROUP">
        <comment>成员管理组表</comment>
        <id name="groupId" type="java.lang.String">
            <column name="GROUP_ID" length="32">
            	<comment>群组标识</comment>
            </column>
            <generator class="uuid.hex"></generator>
        </id>
        <property name="groupName" type="java.lang.String">
            <column name="GROUP_NAME" length="16">
                <comment>群组名称</comment>
            </column>
        </property>
        <property name="seq" type="java.lang.Long">
            <column name="SEQ" length="20">
                <comment>序号</comment>
            </column>
        </property>
        <property name="count" type="java.lang.Integer">
            <column name="COUNT" length="4">
                <comment>数量</comment>
            </column>
        </property>
    </class>
  
    <sql-query name="com.mp100.risk.ap.team.domain.hibernate.dv.queryMembersGroupListDV">
       <return alias="MembersGroupView" class="com.mp100.risk.ap.team.domain.hibernate.dv.MembersGroupView"></return>
     <![CDATA[
			     select 
			     		g.GROUP_ID,
			     		g.GROUP_NAME,
			     		g.SEQ,
			     		'' COUNT
			     from
			     		X_AP_GROUP	g
			     order by 
			     		g.SEQ
      ]]>
    </sql-query>
    
    <sql-query name="com.mp100.risk.ap.team.domain.hibernate.dv.queryMembersValidateGroupDV">
       <return alias="MembersGroupView" class="com.mp100.risk.ap.team.domain.hibernate.dv.MembersGroupView"></return>
     <![CDATA[
			     select 
			     		g.GROUP_ID,
			     		g.GROUP_NAME,
			     		g.SEQ,
			     		'' COUNT
			     from
			     		X_AP_GROUP	g
			     where  
			     		g.GROUP_NAME like :QT_groupName or :QT_groupName is null		
			     order by 
			     		g.SEQ
      ]]>
    </sql-query>
    
    <!-- 查询每个组的数量 -->
    <sql-query name="com.mp100.risk.ap.team.domain.hibernate.dv.queryMembersGroupCountDV">
       <return alias="MembersGroupView" class="com.mp100.risk.ap.team.domain.hibernate.dv.MembersGroupView"></return>
     <![CDATA[
			     select  
			     		g.GROUP_ID,
			     		g.GROUP_NAME,
			     		g.SEQ,
			     		(select count(*) from X_AP_MEMBERS m where m.GROUP_ID = g.GROUP_ID) as COUNT  
			     from X_AP_GROUP  g
			     order by g.SEQ
      ]]>
    </sql-query>
</hibernate-mapping>
